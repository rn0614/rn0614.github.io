<!DOCTYPE html> <html lang="en"><head>
<title>Docker Compose YAML 파일 내부 구조</title>
<base href="../../..">
<meta name="pathname" content="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html">
<meta name="description" content="posting - Docker Compose YAML 파일 내부 구조">
<meta property="og:title" content="Docker Compose YAML 파일 내부 구조">
<meta property="og:description" content="posting - Docker Compose YAML 파일 내부 구조">
<meta property="og:type" content="website">
<meta property="og:url" content="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html">
<meta property="og:image" content="undefined">
<meta charset="UTF-8"><meta property="og:site_name" content="posting"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="site-lib/rss.xml"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-wasm-script" src="site-lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="site-lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.png"><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:min(60em, 100%);--line-width-adaptive:min(40em, 100%);--file-line-width:70em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:calc(2.3em + 2 * var(--sidebar-margin));width:var(--sidebar-width);padding:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row;border-top-right-radius:var(--radius-l)}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse;border-top-left-radius:var(--radius-l)}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:1px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#navbar:not(:empty){display:flex;align-items:center;justify-content:space-between;padding:.5em 1em;width:100%}#main{display:flex;flex-direction:column;height:100%;width:100%;align-items:stretch;justify-content:center}#main-horizontal{display:flex;flex-direction:row;flex-grow:1;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6,li):has(> :is(.math,table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const n=await fetch(e);if(!n.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await n.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let n=document.createRange().createContextualFragment(o);t.before(n),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(n){let l=o[n],c=n+1;l?(l&&"true"!=l.getAttribute("loaded")||n<o.length&&e(c),n<o.length&&l.addEventListener("load",(()=>e(c)))):n<o.length?e(c):t()}(0)}</script></head><body class="publish css-settings-manager styled-scrollbars show-inline-title show-ribbon is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><div id="main"><div id="navbar"></div><div id="main-horizontal"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><div id="search-container"><div id="search-wrapper"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div aria-label="Clear search" id="search-clear-button"></div></div></div></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event allow-fold-headings allow-fold-lists show-indentation-guide show-properties is-readable-line-width" data-type="markdown"><style id="MJX-CHTML-styles"></style><pre class="frontmatter language-yaml" style="display: none;"><code class="language-yaml is-loaded"><span class="token key atrule">id</span><span class="token punctuation">:</span> wHZSf7SOkq1MWuS
<span class="token key atrule">path</span><span class="token punctuation">:</span> 100 PARA/140 Resources/이전데이터/Docker Compose YAML 파일 내부 구조.md
<span class="token key atrule">title</span><span class="token punctuation">:</span> Docker Compose YAML 파일 내부 구조
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">""</span>
<span class="token key atrule">socialImage</span><span class="token punctuation">:</span> <span class="token string">""</span>
<span class="token key atrule">domains</span><span class="token punctuation">:</span> <span class="token string">""</span>
<span class="token key atrule">created</span><span class="token punctuation">:</span> <span class="token datetime number">2025-08-26 21:57:47</span>
<span class="token key atrule">updated</span><span class="token punctuation">:</span> <span class="token datetime number">2025-08-26 21:57:47</span>
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> tech/devops/cicd
  <span class="token punctuation">-</span> tech/devops/docker
<span class="token key atrule">CODE</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> Distill
  <span class="token punctuation">-</span> Express
<span class="token key atrule">publish</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="Docker_Compose_YAML_파일_내부_구조_0">Docker Compose YAML 파일 내부 구조</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-h2"><h2 data-heading="전체 구조 개요" dir="auto" class="heading" id="전체_구조_개요_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>전체 구조 개요</h2></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>                    <span class="token comment"># Compose 파일 포맷 버전</span>

<span class="token comment"># 최상위 섹션들</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>                         <span class="token comment"># 컨테이너 서비스 정의 (필수)</span>
  <span class="token key atrule">service_name</span><span class="token punctuation">:</span>
    <span class="token comment"># 서비스 설정</span>

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>                          <span class="token comment"># 볼륨 정의 (선택)</span>
  <span class="token key atrule">volume_name</span><span class="token punctuation">:</span>
    <span class="token comment"># 볼륨 설정</span>

<span class="token key atrule">networks</span><span class="token punctuation">:</span>                         <span class="token comment"># 네트워크 정의 (선택)</span>
  <span class="token key atrule">network_name</span><span class="token punctuation">:</span>
    <span class="token comment"># 네트워크 설정</span>

<span class="token key atrule">configs</span><span class="token punctuation">:</span>                          <span class="token comment"># 설정 파일 정의 (선택)</span>
  <span class="token key atrule">config_name</span><span class="token punctuation">:</span>
    <span class="token comment"># 설정 파일</span>

<span class="token key atrule">secrets</span><span class="token punctuation">:</span>                          <span class="token comment"># 시크릿 정의 (선택)</span>
  <span class="token key atrule">secret_name</span><span class="token punctuation">:</span>
    <span class="token comment"># 시크릿 설정</span>

<span class="token comment"># YAML 확장 기능</span>
<span class="token key atrule">x-custom</span><span class="token punctuation">:</span>                         <span class="token comment"># 커스텀 확장 (재사용)</span>
  <span class="token important">&amp;anchor:</span> value

<span class="token key atrule">include</span><span class="token punctuation">:</span>                          <span class="token comment"># 다른 파일 포함 (Compose 2.20+)</span>
  <span class="token punctuation">-</span> path/to/other.yml
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="1. version (버전 지정)" dir="auto" class="heading" id="1._version_(버전_지정)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>1. version (버전 지정)</h2></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>    <span class="token comment"># 권장 버전</span>
<span class="token comment"># version: '3.9'  # 최신 기능 사용시</span>
<span class="token comment"># version: '2.4'  # 레거시 지원</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><strong>주요 버전:</strong></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><code>3.8</code>: 가장 널리 사용, 안정적</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><code>3.9</code>: 최신 기능 포함</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><code>2.x</code>: 레거시 (비추천)</li>
</ul></div><div class="el-h2"><h2 data-heading="2. services (서비스 정의) - 핵심!" dir="auto" class="heading" id="2._services_(서비스_정의)_-_핵심!_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>2. services (서비스 정의) - 핵심!</h2></div><div class="el-h3"><h3 data-heading="2-1. 기본 서비스 구조" dir="auto" class="heading" id="2-1._기본_서비스_구조_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>2-1. 기본 서비스 구조</h3></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">service_name</span><span class="token punctuation">:</span>                   <span class="token comment"># 서비스 이름 (자유롭게 정의)</span>
    <span class="token comment"># 이미지 관련</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>latest           <span class="token comment"># Docker Hub 이미지</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>                        <span class="token comment"># 또는 Dockerfile로 빌드</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> .
      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile
    
    <span class="token comment"># 컨테이너 설정</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>nginx      <span class="token comment"># 컨테이너 이름</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> web<span class="token punctuation">-</span>server          <span class="token comment"># 호스트명</span>
    
    <span class="token comment"># 포트 매핑</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"80:80"</span>                   <span class="token comment"># 호스트:컨테이너</span>
      <span class="token punctuation">-</span> <span class="token string">"443:443"</span>
      
    <span class="token comment"># 볼륨 마운트</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./data<span class="token punctuation">:</span>/app/data          <span class="token comment"># Bind mount</span>
      <span class="token punctuation">-</span> app_data<span class="token punctuation">:</span>/app/storage     <span class="token comment"># Named volume</span>
      
    <span class="token comment"># 환경변수</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> NODE_ENV=production
      <span class="token punctuation">-</span> API_KEY=secret
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> .env
      
    <span class="token comment"># 네트워크</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> frontend
      <span class="token punctuation">-</span> backend
      
    <span class="token comment"># 의존성</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> database
      <span class="token punctuation">-</span> redis
      
    <span class="token comment"># 재시작 정책</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    
    <span class="token comment"># 실행 명령어</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> npm start
    <span class="token key atrule">entrypoint</span><span class="token punctuation">:</span> /docker<span class="token punctuation">-</span>entrypoint.sh
    
    <span class="token comment"># 작업 디렉토리</span>
    <span class="token key atrule">working_dir</span><span class="token punctuation">:</span> /app
    
    <span class="token comment"># 사용자</span>
    <span class="token key atrule">user</span><span class="token punctuation">:</span> <span class="token string">"1000:1000"</span>
    
    <span class="token comment"># 리소스 제한</span>
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token key atrule">limits</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 512M
          <span class="token key atrule">cpus</span><span class="token punctuation">:</span> <span class="token string">"0.5"</span>
    
    <span class="token comment"># 헬스체크</span>
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD"</span><span class="token punctuation">,</span> <span class="token string">"curl"</span><span class="token punctuation">,</span> <span class="token string">"-f"</span><span class="token punctuation">,</span> <span class="token string">"http://localhost"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>
      
    <span class="token comment"># 기타</span>
    <span class="token key atrule">labels</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"com.example.description=Web server"</span>
    <span class="token key atrule">privileged</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">stdin_open</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>              <span class="token comment"># -i 옵션</span>
    <span class="token key atrule">tty</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>                     <span class="token comment"># -t 옵션</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="2-2. 이미지 관련 옵션" dir="auto" class="heading" id="2-2._이미지_관련_옵션_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>2-2. 이미지 관련 옵션</h3></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token comment"># 방법 1: 기존 이미지 사용</span>
  <span class="token key atrule">app1</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>1.21<span class="token punctuation">-</span>alpine      <span class="token comment"># 이미지:태그</span>
    
  <span class="token comment"># 방법 2: Dockerfile로 빌드</span>
  <span class="token key atrule">app2</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> .                      <span class="token comment"># 현재 디렉토리의 Dockerfile</span>
    
  <span class="token comment"># 방법 3: 상세 빌드 설정</span>
  <span class="token key atrule">app3</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> ./app              <span class="token comment"># 빌드 컨텍스트</span>
      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile.prod <span class="token comment"># Dockerfile 경로</span>
      <span class="token key atrule">target</span><span class="token punctuation">:</span> production          <span class="token comment"># 멀티스테이지 빌드 타겟</span>
      <span class="token key atrule">args</span><span class="token punctuation">:</span>                       <span class="token comment"># 빌드 인수</span>
        <span class="token punctuation">-</span> NODE_ENV=production
        <span class="token punctuation">-</span> VERSION=1.0.0
      <span class="token key atrule">cache_from</span><span class="token punctuation">:</span>                 <span class="token comment"># 캐시 소스</span>
        <span class="token punctuation">-</span> alpine<span class="token punctuation">:</span>latest
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>                     <span class="token comment"># 이미지 라벨</span>
        <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"1.0"</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="2-3. 포트 매핑 옵션" dir="auto" class="heading" id="2-3._포트_매핑_옵션_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>2-3. 포트 매핑 옵션</h3></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"80:80"</span>                   <span class="token comment"># 호스트:컨테이너</span>
      <span class="token punctuation">-</span> <span class="token string">"127.0.0.1:8080:80"</span>      <span class="token comment"># IP:호스트포트:컨테이너포트</span>
      <span class="token punctuation">-</span> <span class="token string">"3000"</span>                    <span class="token comment"># 컨테이너 포트만 (랜덤 호스트 포트)</span>
      <span class="token punctuation">-</span> <span class="token string">"3000-3005:3000-3005"</span>    <span class="token comment"># 포트 범위</span>
      
    <span class="token key atrule">expose</span><span class="token punctuation">:</span>                       <span class="token comment"># 다른 서비스에만 노출 (호스트 노출 안함)</span>
      <span class="token punctuation">-</span> <span class="token string">"8080"</span>
      <span class="token punctuation">-</span> <span class="token string">"9000"</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="2-4. 볼륨 마운트 옵션" dir="auto" class="heading" id="2-4._볼륨_마운트_옵션_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>2-4. 볼륨 마운트 옵션</h3></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">app</span><span class="token punctuation">:</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token comment"># Bind Mount</span>
      <span class="token punctuation">-</span> ./data<span class="token punctuation">:</span>/app/data          <span class="token comment"># 호스트경로:컨테이너경로</span>
      <span class="token punctuation">-</span> ./config<span class="token punctuation">:</span>/app/config<span class="token punctuation">:</span>ro   <span class="token comment"># 읽기 전용</span>
      <span class="token punctuation">-</span> $<span class="token punctuation">{</span>HOME<span class="token punctuation">}</span>/logs<span class="token punctuation">:</span>/app/logs    <span class="token comment"># 환경변수 사용</span>
      
      <span class="token comment"># Named Volume</span>
      <span class="token punctuation">-</span> app_data<span class="token punctuation">:</span>/app/data        <span class="token comment"># 볼륨명:컨테이너경로</span>
      <span class="token punctuation">-</span> app_cache<span class="token punctuation">:</span>/app/cache<span class="token punctuation">:</span>rw   <span class="token comment"># 읽기/쓰기 (기본값)</span>
      
      <span class="token comment"># Anonymous Volume</span>
      <span class="token punctuation">-</span> /app/node_modules         <span class="token comment"># 컨테이너 경로만</span>
      
      <span class="token comment"># tmpfs (메모리)</span>
      <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> tmpfs
        <span class="token key atrule">target</span><span class="token punctuation">:</span> /app/tmp
        <span class="token key atrule">tmpfs</span><span class="token punctuation">:</span>
          <span class="token key atrule">size</span><span class="token punctuation">:</span> 100M
          
      <span class="token comment"># 상세 마운트 설정</span>
      <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> bind
        <span class="token key atrule">source</span><span class="token punctuation">:</span> ./data
        <span class="token key atrule">target</span><span class="token punctuation">:</span> /app/data
        <span class="token key atrule">read_only</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="2-5. 환경변수 설정" dir="auto" class="heading" id="2-5._환경변수_설정_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>2-5. 환경변수 설정</h3></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">app</span><span class="token punctuation">:</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token comment"># 방법 1: 키=값</span>
      <span class="token punctuation">-</span> NODE_ENV=production
      <span class="token punctuation">-</span> DEBUG=true
      <span class="token punctuation">-</span> PORT=3000
      
      <span class="token comment"># 방법 2: 맵 형태</span>
      <span class="token key atrule">NODE_ENV</span><span class="token punctuation">:</span> production
      <span class="token key atrule">DEBUG</span><span class="token punctuation">:</span> <span class="token string">"true"</span>               <span class="token comment"># YAML에서 문자열로 처리</span>
      <span class="token key atrule">API_URL</span><span class="token punctuation">:</span> <span class="token string">"https://api.example.com"</span>
      
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>                     <span class="token comment"># 환경변수 파일</span>
      <span class="token punctuation">-</span> .env                      <span class="token comment"># 기본 파일</span>
      <span class="token punctuation">-</span> .env.local               <span class="token comment"># 추가 파일</span>
      <span class="token punctuation">-</span> ./config/app.env         <span class="token comment"># 경로 지정</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="2-6. 네트워크 설정" dir="auto" class="heading" id="2-6._네트워크_설정_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>2-6. 네트워크 설정</h3></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> frontend                  <span class="token comment"># 네트워크 이름만</span>
      <span class="token punctuation">-</span> backend
      
  <span class="token key atrule">api</span><span class="token punctuation">:</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token key atrule">frontend</span><span class="token punctuation">:</span>                   <span class="token comment"># 상세 설정</span>
        <span class="token key atrule">aliases</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> api<span class="token punctuation">-</span>server
        <span class="token key atrule">ipv4_address</span><span class="token punctuation">:</span> 172.20.0.5
      <span class="token key atrule">backend</span><span class="token punctuation">:</span>
        <span class="token key atrule">priority</span><span class="token punctuation">:</span> <span class="token number">1000</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="2-7. 의존성 관리" dir="auto" class="heading" id="2-7._의존성_관리_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>2-7. 의존성 관리</h3></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> database                  <span class="token comment"># 기본 의존성</span>
      <span class="token punctuation">-</span> redis
      
  <span class="token key atrule">api</span><span class="token punctuation">:</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>                   <span class="token comment"># 상세 의존성 (Compose 3.8+)</span>
      <span class="token key atrule">database</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy
      <span class="token key atrule">redis</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_started
        <span class="token key atrule">restart</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="2-8. 헬스체크" dir="auto" class="heading" id="2-8._헬스체크_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>2-8. 헬스체크</h3></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD"</span><span class="token punctuation">,</span> <span class="token string">"curl"</span><span class="token punctuation">,</span> <span class="token string">"-f"</span><span class="token punctuation">,</span> <span class="token string">"http://localhost/health"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s               <span class="token comment"># 검사 간격</span>
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s                <span class="token comment"># 타임아웃</span>
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>                  <span class="token comment"># 재시도 횟수</span>
      <span class="token key atrule">start_period</span><span class="token punctuation">:</span> 30s           <span class="token comment"># 시작 대기 시간</span>
      
  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD-SHELL"</span><span class="token punctuation">,</span> <span class="token string">"pg_isready -U postgres"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 5s
      
  <span class="token key atrule">app</span><span class="token punctuation">:</span>
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">disable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>               <span class="token comment"># 헬스체크 비활성화</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="2-9. 리소스 제한" dir="auto" class="heading" id="2-9._리소스_제한_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>2-9. 리소스 제한</h3></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">app</span><span class="token punctuation">:</span>
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token key atrule">limits</span><span class="token punctuation">:</span>
          <span class="token key atrule">cpus</span><span class="token punctuation">:</span> <span class="token string">'0.50'</span>            <span class="token comment"># CPU 제한</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 512M            <span class="token comment"># 메모리 제한</span>
        <span class="token key atrule">reservations</span><span class="token punctuation">:</span>
          <span class="token key atrule">cpus</span><span class="token punctuation">:</span> <span class="token string">'0.25'</span>            <span class="token comment"># CPU 예약</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 256M            <span class="token comment"># 메모리 예약</span>
          
    <span class="token comment"># 또는 간단한 메모리 제한</span>
    <span class="token key atrule">mem_limit</span><span class="token punctuation">:</span> 512m
    <span class="token key atrule">memswap_limit</span><span class="token punctuation">:</span> 1g
    
    <span class="token comment"># CPU 제한</span>
    <span class="token key atrule">cpus</span><span class="token punctuation">:</span> <span class="token number">0.5</span>
    <span class="token key atrule">cpu_shares</span><span class="token punctuation">:</span> <span class="token number">512</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="2-10. 프로파일 사용" dir="auto" class="heading" id="2-10._프로파일_사용_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>2-10. 프로파일 사용</h3></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token comment"># 항상 실행되는 서비스</span>
  <span class="token key atrule">app</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> myapp<span class="token punctuation">:</span>latest
    
  <span class="token comment"># 개발환경에서만 실행</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">profiles</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"dev"</span><span class="token punctuation">,</span> <span class="token string">"test"</span><span class="token punctuation">]</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span><span class="token number">6</span>
    
  <span class="token comment"># 모니터링 프로파일</span>
  <span class="token key atrule">prometheus</span><span class="token punctuation">:</span>
    <span class="token key atrule">profiles</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"monitoring"</span><span class="token punctuation">]</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> prom/prometheus
    
  <span class="token key atrule">grafana</span><span class="token punctuation">:</span>
    <span class="token key atrule">profiles</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"monitoring"</span><span class="token punctuation">]</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> grafana/grafana
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="3. volumes (볼륨 정의)" dir="auto" class="heading" id="3._volumes_(볼륨_정의)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>3. volumes (볼륨 정의)</h2></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token comment"># 기본 Named Volume</span>
  <span class="token key atrule">app_data</span><span class="token punctuation">:</span>
  
  <span class="token comment"># 상세 설정</span>
  <span class="token key atrule">postgres_data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local               <span class="token comment"># 볼륨 드라이버</span>
    <span class="token key atrule">driver_opts</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> none
      <span class="token key atrule">o</span><span class="token punctuation">:</span> bind
      <span class="token key atrule">device</span><span class="token punctuation">:</span> /path/to/data
      
  <span class="token comment"># 외부 볼륨 (이미 존재하는 볼륨)</span>
  <span class="token key atrule">existing_volume</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>existing<span class="token punctuation">-</span>volume
    
  <span class="token comment"># 라벨 추가</span>
  <span class="token key atrule">app_cache</span><span class="token punctuation">:</span>
    <span class="token key atrule">labels</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"com.example.description=Application cache"</span>
      <span class="token punctuation">-</span> <span class="token string">"com.example.team=backend"</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="4. networks (네트워크 정의)" dir="auto" class="heading" id="4._networks_(네트워크_정의)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>4. networks (네트워크 정의)</h2></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token comment"># 기본 네트워크</span>
  <span class="token key atrule">frontend</span><span class="token punctuation">:</span>
  
  <span class="token comment"># 상세 설정</span>
  <span class="token key atrule">backend</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge              <span class="token comment"># 네트워크 드라이버</span>
    <span class="token key atrule">ipam</span><span class="token punctuation">:</span>                       <span class="token comment"># IP 관리</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">subnet</span><span class="token punctuation">:</span> 172.20.0.0/16
          <span class="token key atrule">gateway</span><span class="token punctuation">:</span> 172.20.0.1
    <span class="token key atrule">driver_opts</span><span class="token punctuation">:</span>
      <span class="token key atrule">com.docker.network.bridge.name</span><span class="token punctuation">:</span> backend<span class="token punctuation">-</span>bridge
      
  <span class="token comment"># 외부 네트워크 (이미 존재)</span>
  <span class="token key atrule">existing_network</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>existing<span class="token punctuation">-</span>network
    
  <span class="token comment"># 호스트 네트워크</span>
  <span class="token key atrule">host_network</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> host
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="5. configs (설정 파일)" dir="auto" class="heading" id="5._configs_(설정_파일)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>5. configs (설정 파일)</h2></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">configs</span><span class="token punctuation">:</span>
  <span class="token comment"># 파일에서 설정 로드</span>
  <span class="token key atrule">nginx_config</span><span class="token punctuation">:</span>
    <span class="token key atrule">file</span><span class="token punctuation">:</span> ./nginx/nginx.conf
    
  <span class="token comment"># 외부 설정</span>
  <span class="token key atrule">app_config</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> production_config
    
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">configs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">source</span><span class="token punctuation">:</span> nginx_config
        <span class="token key atrule">target</span><span class="token punctuation">:</span> /etc/nginx/nginx.conf
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token number">0644</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="6. secrets (시크릿)" dir="auto" class="heading" id="6._secrets_(시크릿)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>6. secrets (시크릿)</h2></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">secrets</span><span class="token punctuation">:</span>
  <span class="token comment"># 파일에서 시크릿 로드</span>
  <span class="token key atrule">db_password</span><span class="token punctuation">:</span>
    <span class="token key atrule">file</span><span class="token punctuation">:</span> ./secrets/db_password.txt
    
  <span class="token comment"># 외부 시크릿</span>
  <span class="token key atrule">api_key</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> production_api_key
    
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">app</span><span class="token punctuation">:</span>
    <span class="token key atrule">secrets</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> db_password
      <span class="token punctuation">-</span> <span class="token key atrule">source</span><span class="token punctuation">:</span> api_key
        <span class="token key atrule">target</span><span class="token punctuation">:</span> /run/secrets/api_key
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token number">0400</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="7. YAML 확장 기능" dir="auto" class="heading" id="7._YAML_확장_기능_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7. YAML 확장 기능</h2></div><div class="el-h3"><h3 data-heading="7-1. Anchors &amp; Aliases (재사용)" dir="auto" class="heading" id="7-1._Anchors_&amp;_Aliases_(재사용)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7-1. Anchors &amp; Aliases (재사용)</h3></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token comment"># 공통 설정 정의</span>
<span class="token key atrule">x-common-config</span><span class="token punctuation">:</span> <span class="token important">&amp;common</span>
  <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
  <span class="token key atrule">networks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> app<span class="token punctuation">-</span>network
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> TZ=Asia/Seoul

<span class="token key atrule">x-database-config</span><span class="token punctuation">:</span> <span class="token important">&amp;db-config</span>
  <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*common</span>                     <span class="token comment"># 공통 설정 상속</span>
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> db_data<span class="token punctuation">:</span>/var/lib/postgresql/data
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> POSTGRES_DB=myapp

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*common</span>                   <span class="token comment"># 공통 설정 적용</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    
  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*db-config</span>               <span class="token comment"># DB 설정 적용</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span><span class="token number">13</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="7-2. Extension Fields (확장 필드)" dir="auto" class="heading" id="7-2._Extension_Fields_(확장_필드)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>7-2. Extension Fields (확장 필드)</h3></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token comment"># x-로 시작하는 필드는 Docker에서 무시됨 (사용자 정의용)</span>
<span class="token key atrule">x-logging</span><span class="token punctuation">:</span> <span class="token important">&amp;default-logging</span>
  <span class="token key atrule">driver</span><span class="token punctuation">:</span> json<span class="token punctuation">-</span>file
  <span class="token key atrule">options</span><span class="token punctuation">:</span>
    <span class="token key atrule">max-size</span><span class="token punctuation">:</span> 10m
    <span class="token key atrule">max-file</span><span class="token punctuation">:</span> <span class="token number">3</span>

<span class="token key atrule">x-healthcheck</span><span class="token punctuation">:</span> <span class="token important">&amp;default-healthcheck</span>
  <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
  <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">logging</span><span class="token punctuation">:</span> <span class="token important">*default-logging</span>
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*default-healthcheck</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD"</span><span class="token punctuation">,</span> <span class="token string">"nginx"</span><span class="token punctuation">,</span> <span class="token string">"-t"</span><span class="token punctuation">]</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="8. 완전한 예시" dir="auto" class="heading" id="8._완전한_예시_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>8. 완전한 예시</h2></div><div class="el-pre"><pre class="language-yaml"><code data-line="0" class="language-yaml is-loaded"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.8'</span>

<span class="token comment"># 재사용 가능한 설정들</span>
<span class="token key atrule">x-common</span><span class="token punctuation">:</span> <span class="token important">&amp;common-config</span>
  <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
  <span class="token key atrule">networks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> app<span class="token punctuation">-</span>network
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> TZ=Asia/Seoul
  <span class="token key atrule">logging</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> json<span class="token punctuation">-</span>file
    <span class="token key atrule">options</span><span class="token punctuation">:</span>
      <span class="token key atrule">max-size</span><span class="token punctuation">:</span> 10m
      <span class="token key atrule">max-file</span><span class="token punctuation">:</span> <span class="token number">3</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token comment"># 웹 서버</span>
  <span class="token key atrule">nginx</span><span class="token punctuation">:</span>
    <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*common-config</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>1.21<span class="token punctuation">-</span>alpine
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>proxy
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"80:80"</span>
      <span class="token punctuation">-</span> <span class="token string">"443:443"</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./nginx/nginx.conf<span class="token punctuation">:</span>/etc/nginx/nginx.conf<span class="token punctuation">:</span>ro
      <span class="token punctuation">-</span> ./nginx/ssl<span class="token punctuation">:</span>/etc/nginx/ssl<span class="token punctuation">:</span>ro
      <span class="token punctuation">-</span> static_files<span class="token punctuation">:</span>/var/www/html
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> app
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD"</span><span class="token punctuation">,</span> <span class="token string">"nginx"</span><span class="token punctuation">,</span> <span class="token string">"-t"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>

  <span class="token comment"># 애플리케이션</span>
  <span class="token key atrule">app</span><span class="token punctuation">:</span>
    <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*common-config</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> .
      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile
      <span class="token key atrule">target</span><span class="token punctuation">:</span> production
      <span class="token key atrule">args</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> NODE_ENV=production
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> node<span class="token punctuation">-</span>app
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> NODE_ENV=production
      <span class="token punctuation">-</span> DB_HOST=postgres
      <span class="token punctuation">-</span> REDIS_HOST=redis
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> .env
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> app_data<span class="token punctuation">:</span>/app/data
      <span class="token punctuation">-</span> static_files<span class="token punctuation">:</span>/app/public
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token key atrule">postgres</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy
      <span class="token key atrule">redis</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_started
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD"</span><span class="token punctuation">,</span> <span class="token string">"curl"</span><span class="token punctuation">,</span> <span class="token string">"-f"</span><span class="token punctuation">,</span> <span class="token string">"http://localhost:3000/health"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 30s

  <span class="token comment"># 데이터베이스</span>
  <span class="token key atrule">postgres</span><span class="token punctuation">:</span>
    <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*common-config</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span>13<span class="token punctuation">-</span>alpine
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> postgres<span class="token punctuation">-</span>db
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> POSTGRES_DB=$<span class="token punctuation">{</span>DB_NAME<span class="token punctuation">}</span>
      <span class="token punctuation">-</span> POSTGRES_USER=$<span class="token punctuation">{</span>DB_USER<span class="token punctuation">}</span>
      <span class="token punctuation">-</span> POSTGRES_PASSWORD=$<span class="token punctuation">{</span>DB_PASSWORD<span class="token punctuation">}</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> postgres_data<span class="token punctuation">:</span>/var/lib/postgresql/data
      <span class="token punctuation">-</span> ./postgres/init.sql<span class="token punctuation">:</span>/docker<span class="token punctuation">-</span>entrypoint<span class="token punctuation">-</span>initdb.d/init.sql<span class="token punctuation">:</span>ro
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"127.0.0.1:5432:5432"</span>
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"CMD-SHELL"</span><span class="token punctuation">,</span> <span class="token string">"pg_isready -U ${DB_USER} -d ${DB_NAME}"</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 5s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 5s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>

  <span class="token comment"># 캐시</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*common-config</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span>6<span class="token punctuation">-</span>alpine
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>cache
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> redis_data<span class="token punctuation">:</span>/data
      <span class="token punctuation">-</span> ./redis/redis.conf<span class="token punctuation">:</span>/usr/local/etc/redis/redis.conf<span class="token punctuation">:</span>ro
    <span class="token key atrule">command</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>server /usr/local/etc/redis/redis.conf

  <span class="token comment"># 모니터링 (프로파일 사용)</span>
  <span class="token key atrule">prometheus</span><span class="token punctuation">:</span>
    <span class="token key atrule">profiles</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"monitoring"</span><span class="token punctuation">]</span>
    <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*common-config</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> prom/prometheus
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"9090:9090"</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./monitoring/prometheus.yml<span class="token punctuation">:</span>/etc/prometheus/prometheus.yml<span class="token punctuation">:</span>ro
      <span class="token punctuation">-</span> prometheus_data<span class="token punctuation">:</span>/prometheus

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">app_data</span><span class="token punctuation">:</span>
    <span class="token key atrule">labels</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"com.example.description=Application data"</span>
  <span class="token key atrule">postgres_data</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> local
  <span class="token key atrule">redis_data</span><span class="token punctuation">:</span>
  <span class="token key atrule">static_files</span><span class="token punctuation">:</span>
  <span class="token key atrule">prometheus_data</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># 외부에서 관리되는 볼륨</span>

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">app-network</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge
    <span class="token key atrule">ipam</span><span class="token punctuation">:</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">subnet</span><span class="token punctuation">:</span> 172.20.0.0/16

<span class="token key atrule">configs</span><span class="token punctuation">:</span>
  <span class="token key atrule">nginx_config</span><span class="token punctuation">:</span>
    <span class="token key atrule">file</span><span class="token punctuation">:</span> ./nginx/nginx.conf

<span class="token key atrule">secrets</span><span class="token punctuation">:</span>
  <span class="token key atrule">db_password</span><span class="token punctuation">:</span>
    <span class="token key atrule">file</span><span class="token punctuation">:</span> ./secrets/db_password.txt
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">이것이 Docker Compose YAML 파일에서 정의할 수 있는 모든 구조와 옵션들입니다! 🚀</p></div><div class="el-p"><p dir="auto"><a class="internal-link" data-href="posts/100 Resources/103 NewDevelopments/Docker 기본.md" href=".html" target="_self" rel="noopener nofollow">Docker 기본</a></p></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div class="graph-view-wrapper"><div class="feature-header"><div class="feature-title">Interactive Graph</div></div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<div class="graph-icon graph-global" role="button" aria-label="Global Graph" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-git-fork"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#Docker_Compose_YAML_파일_내부_구조_0" data-path="#Docker_Compose_YAML_파일_내부_구조_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Docker Compose YAML 파일 내부 구조">Docker Compose YAML 파일 내부 구조</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#전체_구조_개요_0" data-path="#전체_구조_개요_0"><div class="tree-item-inner heading-link" heading-name="전체 구조 개요">전체 구조 개요</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#1._version_(버전_지정)_0" data-path="#1._version_(버전_지정)_0"><div class="tree-item-inner heading-link" heading-name="1. version (버전 지정)">1. version (버전 지정)</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#2._services_(서비스_정의)_-_핵심!_0" data-path="#2._services_(서비스_정의)_-_핵심!_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="2. services (서비스 정의) - 핵심!">2. services (서비스 정의) - 핵심!</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#2-1._기본_서비스_구조_0" data-path="#2-1._기본_서비스_구조_0"><div class="tree-item-inner heading-link" heading-name="2-1. 기본 서비스 구조">2-1. 기본 서비스 구조</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#2-2._이미지_관련_옵션_0" data-path="#2-2._이미지_관련_옵션_0"><div class="tree-item-inner heading-link" heading-name="2-2. 이미지 관련 옵션">2-2. 이미지 관련 옵션</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#2-3._포트_매핑_옵션_0" data-path="#2-3._포트_매핑_옵션_0"><div class="tree-item-inner heading-link" heading-name="2-3. 포트 매핑 옵션">2-3. 포트 매핑 옵션</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#2-4._볼륨_마운트_옵션_0" data-path="#2-4._볼륨_마운트_옵션_0"><div class="tree-item-inner heading-link" heading-name="2-4. 볼륨 마운트 옵션">2-4. 볼륨 마운트 옵션</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#2-5._환경변수_설정_0" data-path="#2-5._환경변수_설정_0"><div class="tree-item-inner heading-link" heading-name="2-5. 환경변수 설정">2-5. 환경변수 설정</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#2-6._네트워크_설정_0" data-path="#2-6._네트워크_설정_0"><div class="tree-item-inner heading-link" heading-name="2-6. 네트워크 설정">2-6. 네트워크 설정</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#2-7._의존성_관리_0" data-path="#2-7._의존성_관리_0"><div class="tree-item-inner heading-link" heading-name="2-7. 의존성 관리">2-7. 의존성 관리</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#2-8._헬스체크_0" data-path="#2-8._헬스체크_0"><div class="tree-item-inner heading-link" heading-name="2-8. 헬스체크">2-8. 헬스체크</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#2-9._리소스_제한_0" data-path="#2-9._리소스_제한_0"><div class="tree-item-inner heading-link" heading-name="2-9. 리소스 제한">2-9. 리소스 제한</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#2-10._프로파일_사용_0" data-path="#2-10._프로파일_사용_0"><div class="tree-item-inner heading-link" heading-name="2-10. 프로파일 사용">2-10. 프로파일 사용</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#3._volumes_(볼륨_정의)_0" data-path="#3._volumes_(볼륨_정의)_0"><div class="tree-item-inner heading-link" heading-name="3. volumes (볼륨 정의)">3. volumes (볼륨 정의)</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#4._networks_(네트워크_정의)_0" data-path="#4._networks_(네트워크_정의)_0"><div class="tree-item-inner heading-link" heading-name="4. networks (네트워크 정의)">4. networks (네트워크 정의)</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#5._configs_(설정_파일)_0" data-path="#5._configs_(설정_파일)_0"><div class="tree-item-inner heading-link" heading-name="5. configs (설정 파일)">5. configs (설정 파일)</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#6._secrets_(시크릿)_0" data-path="#6._secrets_(시크릿)_0"><div class="tree-item-inner heading-link" heading-name="6. secrets (시크릿)">6. secrets (시크릿)</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#7._YAML_확장_기능_0" data-path="#7._YAML_확장_기능_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="7. YAML 확장 기능">7. YAML 확장 기능</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#7-1._Anchors_&amp;_Aliases_(재사용)_0" data-path="#7-1._Anchors_&amp;_Aliases_(재사용)_0"><div class="tree-item-inner heading-link" heading-name="7-1. Anchors &amp; Aliases (재사용)">7-1. Anchors &amp; Aliases (재사용)</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#7-2._Extension_Fields_(확장_필드)_0" data-path="#7-2._Extension_Fields_(확장_필드)_0"><div class="tree-item-inner heading-link" heading-name="7-2. Extension Fields (확장 필드)">7-2. Extension Fields (확장 필드)</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="300-resources/310-개발공부/318-devops/docker-compose-yaml-파일-내부-구조.html#8._완전한_예시_0" data-path="#8._완전한_예시_0"><div class="tree-item-inner heading-link" heading-name="8. 완전한 예시">8. 완전한 예시</div></a><div class="tree-item-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></div></body></html>